<!doctype html><html lang=en-uk><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://basilesimon.fr/images/favicon.png><title>Tractatus Logico (Phylo)sophicus</title>
<meta name=title content="Tractatus Logico (Phylo)sophicus"><meta name=description content="Using phylogenetics visualisations to represent the Tractatus Logico-Philosophicus"><meta name=keywords content="r,"><meta property="og:url" content="https://basilesimon.fr/blog/tractatus-logico-philosophicus/"><meta property="og:site_name" content="ðŸ‘‹ hi, Iâ€™m basile"><meta property="og:title" content="Tractatus Logico (Phylo)sophicus"><meta property="og:description" content="Using phylogenetics visualisations to represent the Tractatus Logico-Philosophicus"><meta property="og:locale" content="en_uk"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-03-02T00:00:00+00:00"><meta property="article:modified_time" content="2019-03-02T00:00:00+00:00"><meta property="article:tag" content="R"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tractatus Logico (Phylo)sophicus"><meta name=twitter:description content="Using phylogenetics visualisations to represent the Tractatus Logico-Philosophicus"><meta itemprop=name content="Tractatus Logico (Phylo)sophicus"><meta itemprop=description content="Using phylogenetics visualisations to represent the Tractatus Logico-Philosophicus"><meta itemprop=datePublished content="2019-03-02T00:00:00+00:00"><meta itemprop=dateModified content="2019-03-02T00:00:00+00:00"><meta itemprop=wordCount content="407"><meta itemprop=keywords content="R"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style><base href=https://basilesimon.fr/><link rel=stylesheet href=main.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel=stylesheet><link rel=alternate type=application/rss+xml href=https://basilesimon.fr/blog/index.xml title="ðŸ‘‹ hi, Iâ€™m basile"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"Tractatus Logico (Phylo)sophicus","url":"https:\/\/basilesimon.fr\/blog\/tractatus-logico-philosophicus\/","description":"Using phylogenetics visualisations to represent the Tractatus Logico-Philosophicus","publisher":{"@type":"Person","name":"Basile Simon","url":"https://basilesimon.fr/","image":{"@type":"ImageObject","url":"\/assets\/author.jpg"}}}</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "dbdcfc9895e340f8a4e734b917d51280"}'></script><script data-goatcounter=https://deptoolkit.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body><header><a href=/ class=title><h2>ðŸ‘‹ hi, Iâ€™m basile</h2></a><nav><a href=/>Home</a>
<a href=/blog>Blog</a></nav></header><main><article class=single><h1>Tractatus Logico (Phylo)sophicus</h1><p><i><time datetime=2019-03-02 pubdate>02 Mar, 2019</time></i></p><content><div id=viz width=100%></div><p>Over the Christmas holidays, I read <a href="https://www.amazon.co.uk/Maths-Meets-Myths-Quantitative-Understanding-ebook/dp/B01LXAHGCK?SubscriptionId=AKIAILSHYYTFIVPWUY6Q&amp;tag=duckduckgo-ffab-uk-21&amp;linkCode=xm2&amp;camp=2025&amp;creative=165953&amp;creativeASIN=B01LXAHGCK">&ldquo;Maths Meets Myths: Quantitative Approaches to Ancient Narratives,&rdquo;</a> from the Springer <em>Understanding Complex Systems</em> collection.</p><p>The authors present their application of &ldquo;hard&rdquo; science techniques to datasets coming from the humanities &ndash; mostly large corpus of texts, legends and myths.</p><p>One paper in particular uses bioinformatics and phylogenetics to <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0078871">study the spread of a popular folk tale: Little Red Riding Hood</a>. The story that I knew from Perrult and Grimm has patterns that are also found in African and East Asian tales.</p><hr><h3 id=the-tractatus-logico-philosophicus-viewed-as-a-phylogenetic-tree>The Tractatus Logico-Philosophicus viewed as a phylogenetic tree</h3><p>Inspired by this, I&rsquo;ve had a look at Wittgenstein&rsquo;s <a href=https://en.wikipedia.org/wiki/Tractatus_Logico-Philosophicus>Tractatus Logico Philosophicus</a> (available on <a href=http://www.gutenberg.org/ebooks/5740>Project Gutenberg</a>), which is presented as hierachically numbered statements and sub-statements.</p><p>We start by scraping the book into a dataframe with one row per statement:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#900;font-weight:700>library</span>(rvest)
</span></span><span style=display:flex><span>page <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>read_html</span>(<span style=color:#d14>&#34;http://www.tractatuslogico-philosophicus.com/&#34;</span>)
</span></span><span style=display:flex><span>root <span style=color:#000;font-weight:700>&lt;-</span> page <span style=color:#000;font-weight:700>%&gt;%</span> <span style=color:#900;font-weight:700>html_node</span>(<span style=color:#d14>&#34;#root&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>data.frame</span>()
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>for</span> (item <span style=color:#000;font-weight:700>in</span> root <span style=color:#000;font-weight:700>%&gt;%</span> <span style=color:#900;font-weight:700>html_nodes</span>(<span style=color:#d14>&#39;li&#39;</span>)) {
</span></span><span style=display:flex><span>  label <span style=color:#000;font-weight:700>&lt;-</span> item <span style=color:#000;font-weight:700>%&gt;%</span> <span style=color:#900;font-weight:700>html_attr</span>(<span style=color:#d14>&#34;data-name&#34;</span>)
</span></span><span style=display:flex><span>  content <span style=color:#000;font-weight:700>&lt;-</span> item <span style=color:#000;font-weight:700>%&gt;%</span> <span style=color:#900;font-weight:700>html_text</span>(trim <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>TRUE</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  temp <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>data.frame</span>(label, content)
</span></span><span style=display:flex><span>  df <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>rbind</span>(df, temp)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We then generate our cluster analysis based on the distance between the columns of <code>df</code>, hoping that the hierachical numbering of statements will yield something interesting.</p><p>We adopt the <code>single</code> method, described like so:</p><blockquote><p>The <em>single linkage</em> method (which is closely related to the minimal spanning tree) adopts a â€˜friends of friendsâ€™ clustering strategy</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>clusters <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>hclust</span>(<span style=color:#900;font-weight:700>dist</span>(df), method <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;single&#34;</span>)
</span></span></code></pre></div><hr><h3 id=dendograms-galore>Dendograms galore</h3><p>From these clusters, we can represent the book as dendograms, which are used in phylogenetics to represent evolutionary splits and genetic relationships in a tree.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#900;font-weight:700>plot</span>(clusters, labels <span style=color:#000;font-weight:700>=</span> clusters<span style=color:#000;font-weight:700>$</span>labels)
</span></span></code></pre></div><p><img src=assets/Rplot01.png alt></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>d <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>as.dendrogram</span>(clusters)
</span></span><span style=display:flex><span><span style=color:#900;font-weight:700>plot</span>(d, horiz <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>TRUE</span>, type <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;triangle&#34;</span>)
</span></span></code></pre></div><p><img src=assets/Rplot02.png alt></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#900;font-weight:700>library</span>(ape)
</span></span><span style=display:flex><span><span style=color:#900;font-weight:700>plot</span>(<span style=color:#900;font-weight:700>as.phylo</span>(clusters), type <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;fan&#34;</span>)
</span></span></code></pre></div><p><img src=assets/Rplot03.png alt></p><p>The diagrams above show how our clusters have correctly grouped together the hierachical statements of the <em>Tractatus</em>.</p><p>From Mike Bostock&rsquo;s <a href=https://observablehq.com/@mbostock/tree-of-life>Tree of Life</a> helped by Jason Davies&rsquo; work <a href=https://github.com/jasondavies/newick.js>parsing a Newick text file format</a> (standard in tree representations) in Javascript, I re-implemented the above with <code>d3-jetpack</code> and ES6: <a href=https://bl.ocks.org/basilesimon/66db4338c15099f6e8d62f236db2ef2d>https://bl.ocks.org/basilesimon/66db4338c15099f6e8d62f236db2ef2d</a>.</p><p>The resulting chart is at the top of this page.</p><p>I love how simple the result looks and how little we end up knowing about the book itself. The only thinkg I&rsquo;ll let you in the final, chapter seven put-down of this book about language, facts and truths of the world:</p><blockquote><p>What we cannot speak about we must pass over in silence.</p></blockquote><p>Precisely what I didn&rsquo;t do in this blog about phylogenetics and a book I never finished.</p><script>function parseNewick(e){for(var n,s,a,o=[],t={},r=e.split(/\s*(;|\(|\)|,|:)\s*/),i=0;i<r.length;i++)switch(a=r[i],a){case"(":n={},t.branchset=[n],o.push(t),t=n;break;case",":n={},o[o.length-1].branchset.push(n),t=n;break;case")":t=o.pop();break;case":":break;default:s=r[i-1],")"==s||"("==s||","==s?t.name=a:":"==s&&(t.length=parseFloat(a))}return t}</script><script src=https://d3js.org/d3.v4.min.js></script><script src=https://unpkg.com/d3-jetpack@2.0.20/build/d3-jetpack.js></script><script>const outerRadius=900/2,innerRadius=outerRadius-150,color=d3.scaleOrdinal().domain(["1.","2.","3.","4.","5.","6.","7."]).range(d3.schemeCategory10),cluster=d3.cluster().size([360,innerRadius]).separation(function(){return 1}),svg=d3.select("#viz").append("svg").at({width:outerRadius*2,height:outerRadius*2}),chart=svg.append("g").translate([outerRadius-100,outerRadius]);d3.text("https://gist.githubusercontent.com/basilesimon/fa37a436836e3556b1cc36a5067e5e33/raw/a4dddacc9e4332219ac5b94568818e7272977cdd/tlp.txt",function(e,t){if(e)throw e;const n=d3.hierarchy(parseNewick(t),e=>e.branchset).sum(e=>e.branchset?0:1).sort((e,t)=>e.value-t.value||d3.ascending(e.data.length,t.data.length));cluster(n),setRadius(n,n.data.length=0,innerRadius/maxLength(n)),setColor(n);const s=chart.append("g").attr("class","link-extensions").selectAll("path").data(n.links().filter(e=>!e.target.children)).enter().append("path").each(function(e){e.target.linkExtensionNode=this}).attr("d",linkExtensionConstiable),o=chart.append("g").attr("class","links").selectAll("path").data(n.links()).enter().append("path").each(function(e){e.target.linkNode=this}).attr("d",linkConstant).attr("stroke",e=>e.target.color);chart.append("g").attr("class","labels").selectAll("text").data(n.leaves()).enter().append("text").attr("dy",".31em").attr("transform",e=>"rotate("+(e.x-90)+")translate("+(innerRadius+4)+",0)"+(e.x<180?"":"rotate(180)")).attr("text-anchor",e=>e.x<180?"start":"end").text(e=>e.data.name.length<3?e.data.name:"")});const maxLength=e=>e.data.length+(e.children?d3.max(e.children,maxLength):0),setRadius=(e,t,n)=>{e.radius=(t+=e.data.length)*n,e.children&&e.children.forEach(function(e){setRadius(e,t,n)})},setColor=e=>{const t=e.data.name.substring(0,2);e.color=color.domain().indexOf(t)>=0?color(t):e.parent?e.parent.color:null,e.children&&e.children.forEach(setColor)},linkConstiable=e=>linkStep(e.source.x,e.source.radius,e.target.x,e.target.radius),linkConstant=e=>linkStep(e.source.x,e.source.y,e.target.x,e.target.y),linkExtensionConstiable=e=>linkStep(e.target.x,e.target.radius,e.target.x,innerRadius),linkExtensionConstant=e=>linkStep(e.target.x,e.target.y,e.target.x,innerRadius);function linkStep(e,t,n,s){const a=Math.cos(e=(e-90)/180*Math.PI),r=Math.sin(e),o=Math.cos(n=(n-90)/180*Math.PI),i=Math.sin(n);return"M"+t*a+","+t*r+(n===e?"":"A"+t+","+t+" 0 0 "+(n>e?1:0)+" "+t*o+","+t*i)+"L"+s*o+","+s*i}</script><style>.links{fill:none;stroke:#000}.link-extensions{fill:none;stroke:#000;stroke-opacity:.25}.labels{font:10px sans-serif;font-weight:700}</style></content><p><a href=https://basilesimon.fr/tags/r/>#R</a></p></article></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a></footer></body></html>