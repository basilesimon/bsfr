<!doctype html><html lang=en-uk><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://basilesimon.fr/images/favicon.png><title>New R package: load and chart oceanic storms</title>
<meta name=title content="New R package: load and chart oceanic storms"><meta name=description content="New R package to load, parse and chart 20 years of oceanic storms data"><meta name=keywords content="r,"><meta property="og:url" content="https://basilesimon.fr/blog/noaastorms-r-package/"><meta property="og:site_name" content="ðŸ‘‹ hi, Iâ€™m basile"><meta property="og:title" content="New R package: load and chart oceanic storms"><meta property="og:description" content="New R package to load, parse and chart 20 years of oceanic storms data"><meta property="og:locale" content="en_uk"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-01-30T00:00:00+00:00"><meta property="article:modified_time" content="2019-01-30T00:00:00+00:00"><meta property="article:tag" content="R"><meta name=twitter:card content="summary"><meta name=twitter:title content="New R package: load and chart oceanic storms"><meta name=twitter:description content="New R package to load, parse and chart 20 years of oceanic storms data"><meta itemprop=name content="New R package: load and chart oceanic storms"><meta itemprop=description content="New R package to load, parse and chart 20 years of oceanic storms data"><meta itemprop=datePublished content="2019-01-30T00:00:00+00:00"><meta itemprop=dateModified content="2019-01-30T00:00:00+00:00"><meta itemprop=wordCount content="386"><meta itemprop=keywords content="R"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style><base href=https://basilesimon.fr/><link rel=stylesheet href=main.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel=stylesheet><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"New R package: load and chart oceanic storms","url":"https:\/\/basilesimon.fr\/blog\/noaastorms-r-package\/","description":"New R package to load, parse and chart 20 years of oceanic storms data","publisher":{"@type":"Person","name":"Basile Simon","url":"https://basilesimon.fr/","image":{"@type":"ImageObject","url":"\/assets\/author.jpg"}}}</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "dbdcfc9895e340f8a4e734b917d51280"}'></script><script data-goatcounter=https://deptoolkit.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body><header><a href=/ class=title><h2>ðŸ‘‹ hi, Iâ€™m basile</h2></a><nav><a href=/>Home</a>
<a href=/blog>Blog</a>
<a href=/weeknotes>Weeknotes</a></nav></header><main><article class=single><h1>New R package: load and chart oceanic storms</h1><p><i><time datetime=2019-01-30 pubdate>30 Jan, 2019</time></i></p><content><p><img src=assets/storms_final.png alt></p><p>Mapping historical storms data is now a little bit easier. <a href=https://blog.basilesimon.fr/2018/09/05/storms-map-in-R/>Off the back of this blog</a>, I have authored an R package (available at <a href=https://github.com/basilesimon/noaastorms>basilesimon/noaastorms</a>) that downloads, cleans and parses NOAA IBtrack data for you.</p><p>The National Oceanic and Atmospheric Administration releases datasets known as <a href=https://www.ncdc.noaa.gov/ibtracs/>International Best Track Archive for Climate Stewardship</a>.</p><p>These datasets are updated regulary and cover all our oceans. The data found in there is fantasticly detailed and goes back as far as 1850 in some case (I wonder how!).</p><h2 id=how-to-install>How to install</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#900;font-weight:700>library</span>(devtools)
</span></span><span style=display:flex><span><span style=color:#900;font-weight:700>install_github</span>(<span style=color:#d14>&#34;basilesimon/noaastorms&#34;</span>)
</span></span></code></pre></div><h2 id=available-functions>Available functions</h2><p><code>getStorms</code>: Fetch NOAA historical best track storms data</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#000;font-weight:700>&gt;</span> df <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>getStorms</span>(<span style=color:#900;font-weight:700>c</span>(<span style=color:#d14>&#39;EP&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#900;font-weight:700>head</span>(df[1<span style=color:#000;font-weight:700>:</span><span style=color:#099>5</span>])
</span></span><span style=display:flex><span>     Serial_Num Season Num Basin Sub_basin    Name
</span></span><span style=display:flex><span><span style=color:#099>2</span> <span style=color:#099>1902276</span>N14266   <span style=color:#099>1902</span>  <span style=color:#099>01</span>    EP        MM UNNAMED
</span></span><span style=display:flex><span><span style=color:#099>3</span> <span style=color:#099>1902276</span>N14266   <span style=color:#099>1902</span>  <span style=color:#099>01</span>    EP        MM UNNAMED
</span></span><span style=display:flex><span><span style=color:#099>4</span> <span style=color:#099>1902276</span>N14266   <span style=color:#099>1902</span>  <span style=color:#099>01</span>    EP        MM UNNAMED
</span></span><span style=display:flex><span><span style=color:#099>5</span> <span style=color:#099>1902276</span>N14266   <span style=color:#099>1902</span>  <span style=color:#099>01</span>    EP        MM UNNAMED
</span></span><span style=display:flex><span><span style=color:#099>6</span> <span style=color:#099>1902276</span>N14266   <span style=color:#099>1902</span>  <span style=color:#099>01</span>    EP        MM UNNAMED
</span></span></code></pre></div><p>The first argument is a vector of basin codes from this list:</p><ul><li>NA: North Atlantic</li><li>SA: South Atlantic</li><li>NI: North Indian</li><li>SI: South Indian</li><li>EP: East Pacific</li><li>SP: South Pacific</li><li>WP: West Pacific</li></ul><p><img src=https://www.ssd.noaa.gov/PS/TROP/TCFP/images/TCFP_basins.gif alt="NOAA basins map"></p><p>To get storms that took place in the Atlantic for example, run <code>getStorms(c('NA', 'SA'))</code>.</p><p>The second (optional) argument is a date range to filter data with. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>dateRange <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>c</span>(<span style=color:#900;font-weight:700>as.Date</span>(<span style=color:#d14>&#39;2010-01-01&#39;</span>), <span style=color:#900;font-weight:700>as.Date</span>(<span style=color:#d14>&#39;2012-12-31&#39;</span>))
</span></span><span style=display:flex><span><span style=color:#900;font-weight:700>getStorms</span>(<span style=color:#900;font-weight:700>c</span>(<span style=color:#d14>&#39;NA&#39;</span>, <span style=color:#d14>&#39;SA&#39;</span>), dateRange <span style=color:#000;font-weight:700>=</span> dateRange)
</span></span></code></pre></div><p>Will query storms that took place in the Atlantic in 2010 and 2012.</p><h2 id=usage>Usage</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#998;font-style:italic># load a map of the world and</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># use `clipPolys` to avoid issues</span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># when zooming in with `coord_map`</span>
</span></span><span style=display:flex><span>wm <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>map_data</span>(<span style=color:#d14>&#34;world&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#900;font-weight:700>library</span>(<span style=color:#d14>&#34;PBSmapping&#34;</span>)
</span></span><span style=display:flex><span>data.table<span style=color:#000;font-weight:700>::</span><span style=color:#900;font-weight:700>setnames</span>(wm, <span style=color:#900;font-weight:700>c</span>(<span style=color:#d14>&#34;X&#34;</span>,<span style=color:#d14>&#34;Y&#34;</span>,<span style=color:#d14>&#34;PID&#34;</span>,<span style=color:#d14>&#34;POS&#34;</span>,<span style=color:#d14>&#34;region&#34;</span>,<span style=color:#d14>&#34;subregion&#34;</span>))
</span></span><span style=display:flex><span>worldmap <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>clipPolys</span>(wm,
</span></span><span style=display:flex><span>  xlim<span style=color:#000;font-weight:700>=</span><span style=color:#900;font-weight:700>c</span>(<span style=color:#099>20</span>,<span style=color:#099>110</span>),ylim<span style=color:#000;font-weight:700>=</span><span style=color:#900;font-weight:700>c</span>(<span style=color:#099>0</span>, <span style=color:#099>45</span>),
</span></span><span style=display:flex><span>  keepExtra<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>TRUE</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># load storms for the Atlantic ocean</span>
</span></span><span style=display:flex><span>spStorms <span style=color:#000;font-weight:700>&lt;-</span> <span style=color:#900;font-weight:700>getStorms</span>(<span style=color:#900;font-weight:700>c</span>(<span style=color:#d14>&#39;NA&#39;</span>, <span style=color:#d14>&#39;SA&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#900;font-weight:700>ggplot</span>(spStorms,
</span></span><span style=display:flex><span>  <span style=color:#900;font-weight:700>aes</span>(x <span style=color:#000;font-weight:700>=</span> Longitude, y <span style=color:#000;font-weight:700>=</span> Latitude,
</span></span><span style=display:flex><span>    group <span style=color:#000;font-weight:700>=</span> Serial_Num)) <span style=color:#000;font-weight:700>+</span> 
</span></span><span style=display:flex><span>  <span style=color:#900;font-weight:700>geom_polygon</span>(data <span style=color:#000;font-weight:700>=</span> worldmap,
</span></span><span style=display:flex><span>    <span style=color:#900;font-weight:700>aes</span>(x <span style=color:#000;font-weight:700>=</span> X, y <span style=color:#000;font-weight:700>=</span> Y, group <span style=color:#000;font-weight:700>=</span> PID), 
</span></span><span style=display:flex><span>    fill <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;whitesmoke&#34;</span>,
</span></span><span style=display:flex><span>    colour <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;gray10&#34;</span>,
</span></span><span style=display:flex><span>    size <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0.2</span>) <span style=color:#000;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#900;font-weight:700>geom_path</span>(alpha <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0.1</span>, size <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0.8</span>,
</span></span><span style=display:flex><span>    color <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;red&#34;</span>) <span style=color:#000;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#900;font-weight:700>coord_map</span>(xlim <span style=color:#000;font-weight:700>=</span> <span style=color:#900;font-weight:700>c</span>(<span style=color:#099>20</span>,<span style=color:#099>110</span>),
</span></span><span style=display:flex><span>    ylim <span style=color:#000;font-weight:700>=</span> <span style=color:#900;font-weight:700>c</span>(<span style=color:#099>0</span>, <span style=color:#099>45</span>)) 
</span></span></code></pre></div><p><img src=https://github.com/basilesimon/noaastorms/raw/master/Rplot.png alt="Screenshot of storms"></p><h2 id=your-feedback-is-important>Your feedback is important</h2><p>Next on the list are more complex queries. Sadly, supporting date ranges doesn&rsquo;t change how much data we need to download (the NOAA data is bulk export).</p><p>I maintain a <a href=https://github.com/basilesimon/noaastorms>list of open issues on Github</a> and hope to capture some feature requests there.</p><p>If you have ideas, bug reports, feature requests, this is the place to go. Thank you!</p></content><p><a href=https://basilesimon.fr/tags/r/>#R</a></p></article></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a></footer></body></html>